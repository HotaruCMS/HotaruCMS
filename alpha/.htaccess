# ####################################################################################################
#  File: /.htaccess
#  Purpose: Rewrite rules for directing users to the right page.
#  Notes: ---
#  License:
#
#   This file is part of Hotaru CMS (http://www.hotarucms.org/).
#
#   Hotaru CMS is free software: you can redistribute it and/or modify it under the terms of the 
#   GNU General Public License as published by the Free Software Foundation, either version 3 of 
#   the License, or (at your option) any later version.
#
#   Hotaru CMS is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without 
#   even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public License along with Hotaru CMS. If not, 
#   see http://www.gnu.org/licenses/.
#   
#   Copyright (C) 2009 Hotaru CMS - http://www.hotarucms.org/
#
#   Note: Part of the source code in this file is from open source projects, copyright as follows:
#
#   Portions are Copyright (C) 2005 by Ricardo Galli <gallir at uib dot es>.
#   Portions are Copyright (C) 2005 - 2008 by Pligg <www.pligg.com>.
#   Portions are Copyright (C) 2008 - 2009 by the Social Web CMS Team <swcms@socialwebcms.com>.
#
# ####################################################################################################

##### 404 Error Begin #####
## If Hotaru is installed in a subfolder, change the below line to ErrorDocument 404 /name-of-subfolder/404error.php
ErrorDocument 404 /404error.php
##### 404 Error End #####

##### Re-directing Begin #####
Options +Indexes +FollowSymlinks
RewriteEngine on
## If Hotaru is installed in a subfolder, change the below line to RewriteBase /name-of-subfolder
RewriteBase /hotaru/branches/alpha
## If installed in a subfolder you may need to add ## to the beginning of the next line
## RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /.*index\.php\ HTTP/

## Remove these two lines if you have a sub-domain like  http://bookmarking.myhotarusite.com  or http://localhost
## Keep if your site url looks like http://www.myhotarusite.com
## RewriteCond %{HTTP_HOST} !^www\.
## RewriteRule ^\/?(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
##### Re-directing End #####

##### URL Rewriting Begin #####

##### CORE ADMIN #####
RewriteRule ^admin/?$ admin/admin_index.php [L]
RewriteRule ^admin/([a-zA-Z0-9_-]+)/?$ admin/admin_index.php?page=$1 [L]
RewriteRule ^admin/plugins/?$ admin/admin_index.php?page=plugins [L]
RewriteRule ^admin/plugin_settings/([a-zA-Z0-9_-]+)/?$ admin/admin_index.php?page=plugin_settings&plugin=$1 [L]

##### GENERIC RULES #####
RewriteCond %{REQUEST_URI} !\.(css|php|png|jpg|gif|ico|js|inc)$
RewriteRule ^(.*)/?$ index.php?page=$1 [L]

RewriteCond %{REQUEST_URI} !\.(css|php|png|jpg|gif|ico|js|inc)$
RewriteRule ^(.*)/(.*)/?$ index.php?page=$1&pos2=$2 [L]

RewriteCond %{REQUEST_URI} !\.(css|php|png|jpg|gif|ico|js|inc)$
RewriteRule ^(.*)/(.*)/(.*)/?$ index.php?page=$1&pos2=$2&pos3=$3 [L]

RewriteCond %{REQUEST_URI} !\.(css|php|png|jpg|gif|ico|js|inc)$
RewriteRule ^(.*)/(.*)/(.*)/(.*)/?$ index.php?page=$1&pos2=$2&pos3=$3&pos4=$4 [L]

RewriteCond %{REQUEST_URI} !\.(css|php|png|jpg|gif|ico|js|inc)$
RewriteRule ^(.*)/(.*)/(.*)/(.*)/(.*)/?$ index.php?page=$1&pos2=$2&pos3=$3&pos4=$4&pos5=$5 [L]

##### URL Rewriting End #####